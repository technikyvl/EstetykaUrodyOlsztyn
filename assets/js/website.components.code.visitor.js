websiteComponents.loader.define("website.components.code.visitor",[],(()=>(()=>{"use strict";var e={99644:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createIFrame=t.createStatusBox=t.createDiv=void 0,t.createDiv=(e,t="")=>{const i=document.createElement("div");return i.className=e,i.textContent=t,i},t.createStatusBox=(e,i)=>{const r=(0,t.createDiv)("sqs-blockStatus"),a=(0,t.createDiv)("sqs-blockStatus-box");if(a.appendChild((0,t.createDiv)("sqs-blockStatus-box-title",e.title)),a.appendChild((0,t.createDiv)("sqs-blockStatus-box-message",e.text)),i){const e=(0,t.createDiv)("sqs-blockStatus-box-button",i.text);e.setAttribute("role","button"),e.addEventListener("click",i.onClick),a.appendChild(e)}return r.appendChild(a),r},t.createIFrame=(e,t,i,r)=>{const a=document.createElement("iframe");return a.className=e,a.allowFullscreen=!0,a.width=i.width?String(Math.round(i.width)):"",a.height=i.height?String(Math.round(i.height)):"",a.srcdoc=t,r&&a.setAttribute("sandbox",r),a}},83159:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.renderSafePreview=t.filterEmbeddedScripts=t.defaultStrings=void 0;const r=i(99644);t.defaultStrings={scriptDisabled:"Script Disabled",enableSafeModeTitle:"Embedded Scripts",enableSafeModeText:"This block contains embedded scripts. Embedded scripts are disabled while you're logged in and editing your site.",enableSafeModeButton:"Preview in safe mode",exitSafeModeTitle:"Safe Preview",exitSafeModeText:"Please view the page after logging out for accurate rendering.",exitSafeModeButton:"Exit safe preview",globalSafeMode:"Embedded Code: This block contains embedded code that has been disabled."};const a=e=>{var i;if(!(null===(i=e.dataset)||void 0===i?void 0:i.localized))return t.defaultStrings;try{return JSON.parse(e.dataset.localized)}catch(e){return t.defaultStrings}};t.filterEmbeddedScripts=(e,t,i)=>{e.innerHTML=t;const s=e.querySelectorAll("script");if(!(null==s?void 0:s.length))return;const d=a(e);s.forEach((e=>{var t;e.replaceWith((t=d.scriptDisabled,(0,r.createDiv)("removed-script",t)))}));const o=(0,r.createStatusBox)({title:d.enableSafeModeTitle,text:d.enableSafeModeText},{text:d.enableSafeModeButton,onClick:i});e.prepend(o)},t.renderSafePreview=(e,t,i)=>{const s=a(e),d=e.getBoundingClientRect(),o={width:d.width||void 0,height:d.height||void 0};e.innerHTML="";const n=(0,r.createStatusBox)({title:s.exitSafeModeTitle,text:s.exitSafeModeText},{text:s.exitSafeModeButton,onClick:i});e.prepend(n),e.append((0,r.createIFrame)("embedded-scripts-preview",t,o,"allow-forms allow-popups allow-scripts"))}}},t={};function i(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,i),s.exports}var r={};return(()=>{var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.Visitor=void 0;const t=i(83159);class a{constructor(e){this.root=e,this.safePreview=!1,this.unfilteredHTML=""}setUnfilteredHTML(e){this.unfilteredHTML=e,this.safePreview=!1}enableSafePreview(){this.safePreview=!0,this.render()}exitSafePreview(){this.safePreview=!1,this.render()}render(){const e=this.getContainer();e&&"true"!==e.getAttribute("data-disable-user-scripts")&&(this.safePreview?(0,t.renderSafePreview)(e,this.unfilteredHTML,(()=>this.exitSafePreview())):(0,t.filterEmbeddedScripts)(e,this.unfilteredHTML,(()=>this.enableSafePreview())))}getContainer(){return this.root.querySelector(".sqs-code-container")}}e.Visitor=a,e.default=e=>new a(e)})(),r})()));